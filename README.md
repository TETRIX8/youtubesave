## FluxTube — быстрый загрузчик YouTube на Flask

Красивое и удобное веб‑приложение для скачивания видео и аудио с YouTube на базе `Flask` и `yt-dlp`. Поддерживает выбор форматов/качества, показывает прогресс‑индикаторы и аккуратные skeleton‑заглушки во время анализа ссылки.

### Основные возможности
- **Современный UI**: стеклянные поверхности, градиенты, анимированный фон aurora, аккуратная типографика.
- **Анимации загрузки**: верхняя индикационная полоса, спиннер, skeleton‑карточки форматов.
- **Выбор формата**: видео, аудио или совмещённые потоки (если доступны).
- **Быстрый анализ**: использует `yt-dlp` для получения метаданных и доступных форматов.
- **Адаптивность**: корректно отображается на мобильных и десктопах.

### Технологии
- **Backend**: `Flask`
- **Загрузка и анализ**: `yt-dlp`
- **Шаблоны/статические файлы**: `Jinja2` в `templates/`, стили и скрипты в `static/`

---

## Быстрый старт

### Требования
- Python 3.10+ (рекомендовано 3.12)
- pip

### Установка
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\\Scripts\\activate
pip install -r requirements.txt
```

### Запуск
```bash
python app.py
```
Приложение поднимется на `http://127.0.0.1:5050` (порт можно пробросить через реверс‑прокси).

Откройте в браузере и вставьте ссылку на YouTube — приложение проанализирует ролик и покажет доступные форматы для скачивания.

---

## Использование

### Через интерфейс
1. Вставьте ссылку на ролик YouTube в поле ввода.
2. Нажмите «Анализировать».
3. Выберите нужный формат/качество в появившемся списке и нажмите «Скачать».

Во время анализа отображаются: верхняя полоса прогресса, спиннер и skeleton‑заглушки.

### Через API
- **POST `/api/info`** — получить метаданные и список форматов.
  - Тело запроса: `{ "url": "https://www.youtube.com/watch?v=..." }`
  - Пример:
    ```bash
    curl -s -X POST http://127.0.0.1:5050/api/info \
      -H 'Content-Type: application/json' \
      -d '{"url":"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}' | jq
    ```

- **GET `/download?url=...&format_id=...`** — скачать выбранный формат.
  - Параметры: `url` (ссылка на видео), `format_id` (идентификатор формата из ответа `/api/info`).

Замечание: для некоторых роликов 1080p и выше доступны только как раздельные потоки (отдельно видео и аудио). В таком случае можно скачать их раздельно и объединить внешними инструментами (например, `ffmpeg`).

---

## Структура проекта
```
/home/ak/yt-downloader
├─ app.py                 # Flask-приложение и эндпоинты
├─ requirements.txt       # Зависимости
├─ templates/
│  └─ index.html          # Главная страница
└─ static/
   ├─ styles.css          # Стили (фон, анимации, skeleton)
   └─ app.js              # Логика UI и запросов к API
```

---

## Советы и троблшутинг
- **Слишком мало форматов**: это зависит от доступности у исходного ролика. Разные ролики могут иметь разные наборы форматов.
- **1080p без звука**: это норма на YouTube (video‑only). Для объединения с аудио используйте `ffmpeg`.
- **Замедленный анализ**: возможны сетевые задержки/ограничения на стороне YouTube. Попробуйте позже или с другого IP.
- **Docker (опционально)**: можно быстро запустить в контейнере:
  ```bash
  docker run --rm -p 5050:5050 -v "$PWD":/app -w /app python:3.12-slim \
    bash -lc "pip install -r requirements.txt && python app.py"
  ```

---

## Настройка и кастомизация
- Цвета, фон и анимации находятся в `static/styles.css`. Меняйте переменные в `:root` и соответствующие блоки (`.fx-aurora`, `.topbar`, `.skeleton`, и т.д.).
- Поведение анимаций и отображение состояний загрузки — в `static/app.js`.

Если нужны другие эффекты/цвета/логотип — опишите пожелания, и мы настроим под ваш вкус. 