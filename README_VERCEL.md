# FluxTube - YouTube Downloader для Vercel

Этот проект адаптирован для развертывания на платформе Vercel.

## Что изменено для Vercel

1. **Добавлен файл `vercel.json`** - конфигурация для Vercel
2. **Создана папка `api/`** с файлом `index.py` - точка входа для Vercel
3. **Добавлена поддержка CORS** - для корректной работы API
4. **Обновлены зависимости** - добавлен `flask-cors`

## Инструкция по развертыванию

### 1. Подготовка

1. Убедитесь, что у вас есть аккаунт на [Vercel](https://vercel.com)
2. Установите Vercel CLI (опционально):
   ```bash
   npm i -g vercel
   ```

### 2. Развертывание через GitHub

1. Загрузите проект в ваш GitHub репозиторий
2. Зайдите на [vercel.com](https://vercel.com) и войдите в аккаунт
3. Нажмите "New Project"
4. Выберите ваш репозиторий с проектом
5. Vercel автоматически определит настройки и развернет проект

### 3. Развертывание через CLI

```bash
# В папке проекта
vercel

# Следуйте инструкциям CLI
# При первом развертывании выберите настройки:
# - Framework Preset: Other
# - Build Command: (оставьте пустым)
# - Output Directory: (оставьте пустым)
# - Development Command: python app.py
```

### 4. Настройки проекта

После развертывания проект будет доступен по URL вида: `https://your-project-name.vercel.app`

## Структура проекта для Vercel

```
youtubesave/
├── api/
│   └── index.py          # Точка входа для Vercel
├── static/
│   ├── styles.css
│   └── app.js
├── templates/
│   └── index.html
├── app.py                # Основное Flask приложение
├── requirements.txt      # Python зависимости
├── vercel.json          # Конфигурация Vercel
└── .vercelignore        # Файлы для игнорирования
```

## Особенности работы на Vercel

1. **Serverless функции** - каждый запрос обрабатывается как отдельная функция
2. **Ограничение времени выполнения** - максимум 30 секунд на запрос
3. **Временные файлы** - загруженные файлы автоматически удаляются после запроса
4. **CORS** - настроен для работы с любыми доменами

## Возможные проблемы и решения

### Проблема: Долгая загрузка больших видео
**Решение**: Vercel имеет ограничение в 30 секунд на выполнение функции. Для больших файлов рекомендуется использовать другие платформы или оптимизировать процесс.

### Проблема: Ошибки с yt-dlp
**Решение**: Убедитесь, что используется последняя версия yt-dlp в requirements.txt

### Проблема: Статические файлы не загружаются
**Решение**: Проверьте настройки маршрутизации в vercel.json

## Мониторинг и логи

1. Зайдите в панель управления Vercel
2. Выберите ваш проект
3. Перейдите в раздел "Functions" для просмотра логов
4. В разделе "Analytics" можно отслеживать использование

## Обновление проекта

Для обновления проекта:
1. Внесите изменения в код
2. Сделайте commit и push в GitHub
3. Vercel автоматически пересоберет и развернет новую версию

Или через CLI:
```bash
vercel --prod
```

## Поддержка

Если возникают проблемы с развертыванием, проверьте:
1. Логи в панели Vercel
2. Правильность настроек в vercel.json
3. Совместимость зависимостей в requirements.txt

